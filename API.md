# Endpoints - v0.3 (discuss at [#34](https://github.com/Pikne-Programy/pikne-zadania/issues/34))

If there is an error (`4xx` or `5xx` status code), the API will return either no content or the JSON object with an error message:

```json
{
  "msg": "<error message>"
}
```

## TODO

- add a possibility to upload images
- add a WebSocket endpoint

## Table of Contents

- [Table of Contents](#table-of-contents)
- [Exercise](#exercise)
  - [`GET /api/exercise/list`](#get-apiexerciselist)
  - [`POST /api/exercise/get`](#post-apiexerciseget)
  - [`POST /api/exercise/update`](#post-apiexerciseupdate)
  - [`POST /api/exercise/check`](#post-apiexercisecheck)
  - [`POST /api/exercise/render`](#post-apiexerciserender)
  - [`POST /api/exercise/preview`](#post-apiexercisepreview)
- [Subject](#subject)
  - [`POST /api/subject/create`](#post-apisubjectcreate)
  - [`POST /api/subject/info`](#post-apisubjectinfo)
  - [`POST /api/subject/permit`](#post-apisubjectpermit)
- [Auth](#auth)
  - [`POST /api/auth/register`](#post-apiauthregister)
  - [`POST /api/auth/login`](#post-apiauthlogin)
  - [`POST /api/auth/logout`](#post-apiauthlogout)
- [User](#user)
  - [`GET /api/user/current`](#get-apiusercurrent)
  - [`POST /api/user/delete`](#post-apiuserdelete)
  - [`POST /api/user/update`](#post-apiuserupdate)
  - [`POST /api/user/info`](#post-apiuserinfo)
- [Team](#team)
  - [`POST /api/team/create`](#post-apiteamcreate)
  - [`POST /api/team/delete`](#post-apiteamdelete)
  - [`POST /api/team/update`](#post-apiteamupdate)
  - [`GET /api/team/list`](#get-apiteamlist)
  - [`POST /api/team/info`](#post-apiteaminfo)
- [Group](#group)
  - [`POST /api/group/create`](#post-apigroupcreate)
  - [`POST /api/group/delete`](#post-apigroupdelete)
  - [`POST /api/group/update`](#post-apigroupupdate)
  - [`GET /api/group/list`](#get-apigrouplist)
  - [`POST /api/group/info`](#post-apigroupinfo)
  - [`POST /api/group/join`](#post-apigroupjoin)
  - [`POST /api/group/add`](#post-apigroupadd)
- [Exam](#exam)
  - [`POST /api/exam/create`](#post-apiexamcreate)
  - [`POST /api/exam/delete`](#post-apiexamdelete)
  - [`POST /api/exam/update`](#post-apiexamupdate)
  - [`POST /api/exam/exercise`](#post-apiexamexercise)
  - [`POST /api/exam/info`](#post-apiexaminfo)
  - [`POST /api/exam/user`](#post-apiexamuser)
  - [`POST /api/exam/stats`](#post-apiexamstats)
  - [`POST /api/exam/render`](#post-apiexamrender)
  - [`POST /api/exam/static`](#post-apiexamstatic)
  - [`POST /api/exam/leave`](#post-apiexamleave)
  - [`POST /api/exam/submit`](#post-apiexamsubmit)

<sub><sup><i><a href='https://magnetikonline.github.io/markdown-toc-generate/'>Table of Contents generated by magnetikonline/markdown-toc-generate</a></i></sup></sub>

## Exercise

### `GET /api/exercise/list`

| Method | URL                  | Description       | Special status codes |
| ------ | -------------------- | ----------------- | -------------------- |
| GET    | `/api/exercise/list` | get all Exercises | -                    |

**Request**:

```json

```

**Response**:

```json
[
  {
    "name": "fizyka",
    "children": [
      {
        "name": "mechanika",
        "children": [
          {
            "name": "kinematyka",
            "children": [
              {
                "name": "Pociągi dwa",
                "children": "pociagi-dwa",
                "done": 0.34
              }
            ]
          }
        ]
      }
    ]
  }
]
```

**note**: Private exercises (ones with `_` subject prefix) will be shown for authorized users with proper permissions. \
**note**: Elements of the root list must be subject objects. \
**note**: `done` property is stated only when the user is authorized, it can be `null` or a number from 0 up to and including 1, see [#24](https://github.com/Pikne-Programy/pikne-zadania/issues/24#issuecomment-782939873).

---

### `POST /api/exercise/get`

| Method | URL                 | Description      | Special status codes |
| ------ | ------------------- | ---------------- | -------------------- |
| POST   | `/api/exercise/get` | get one Exercise | 403, 404             |

**Request**:

```json
{
  "id": "fizyka/pociagi-dwa"
}
```

**Response**:

```json
{
  "content": "---\ntype: EqEx\nname: Pociągi dwa\n---\nZ miast \\(A\\) i \\(B\\) odległych o d=300km wyruszają jednocześnie\ndwa pociągi z prędkościami v_a=[40;60]km/h oraz v_b=[60;80]km/h.\nW jakiej odległości x=?km od miasta \\(A\\) spotkają się te pociągi?\nPo jakim czasie t=?h się to stanie?\n---\nt=d/(v_a+v_b)\nx=t*v_a\n"
}
```

**note**: `content` is ExT-dependent, shown above is the EqEx one.

---

### `POST /api/exercise/update`

| Method | URL                    | Description               | Special status codes |
| ------ | ---------------------- | ------------------------- | -------------------- |
| POST   | `/api/exercise/update` | update exercise's content | 403, 404             |

**Request**:

```json
{
  "id": "fizyka/pociagi-dwa",
  "content": "---\ntype: EqEx\nname: Pociągi dwa\n---\nZ miast \\(A\\) i \\(B\\) odległych o d=300km wyruszają jednocześnie\ndwa pociągi z prędkościami v_a=[40;60]km/h oraz v_b=[60;80]km/h.\nW jakiej odległości x=?km od miasta \\(A\\) spotkają się te pociągi?\nPo jakim czasie t=?h się to stanie?\n---\nt=d/(v_a+v_b)\nx=t*v_a\n"
}
```

**Response**:

```json

```

**note**: `content` is ExT-dependent, shown above is the EqEx one. \
**note**: Only content can be changed, changing id will make a new exercise.

---

### `POST /api/exercise/check`

| Method | URL                   | Description   | Special status codes |
| ------ | --------------------- | ------------- | -------------------- |
| POST   | `/api/exercise/check` | check answers | 404                  |

**Request**:

```json
{
  "id": "fizyka/pociagi-dwa",
  "answers": [15.000000000000004, 13]
}
```

**Response**:

```json
[false, true]
```

**note**: It's ExT-dependent, what is shown above is appropriate for the EqEx one.

---

### `POST /api/exercise/render`

| Method | URL                    | Description        | Special status codes |
| ------ | ---------------------- | ------------------ | -------------------- |
| POST   | `/api/exercise/render` | render an exercise | 403, 404             |

**Request**:

```json
{
  "id": "fizyka/pociagi-dwa",
  "seed": 0
}
```

**Response**:

```json
// Student version
{
  "type": "EqEx",
  "name": "Pociągi dwa 2",
  "done": 0.34,
  "content": {
    "main": "Z miast \\(A\\) i \\(B\\) odległych o \\(d=300\\;\\mathrm{km}\\) wyruszają jednocześnie\ndwa pociągi z prędkościami \\(v_a= 50\\;\\mathrm{\\frac{km}{h}}\\) oraz \\(v_b=70\\;\\mathrm{\\frac{km}{h}}\\).\nW jakiej odległości \\(x\\) od miasta \\(A\\) spotkają się te pociągi?\nPo jakim czasie \\(t\\) się to stanie?",
    "img": ["1.png", "2.png"],
    "unknowns": [
      ["x", "\\mathrm{km}"],
      ["t", "\\mathrm{s}"]
    ]
  }
}

// Teacher/Admin version
{
  "type": "EqEx",
  "name": "Pociągi dwa 2",
  "content": {
    "main": "Z miast \\(A\\) i \\(B\\) odległych o \\(d=300\\;\\mathrm{km}\\) wyruszają jednocześnie\ndwa pociągi z prędkościami \\(v_a= 50\\;\\mathrm{\\frac{km}{h}}\\) oraz \\(v_b=70\\;\\mathrm{\\frac{km}{h}}\\).\nW jakiej odległości \\(x\\) od miasta \\(A\\) spotkają się te pociągi?\nPo jakim czasie \\(t\\) się to stanie?",
    "img": ["1.png", "2.png"],
    "unknowns": [
      ["x", "\\mathrm{km}"],
      ["t", "\\mathrm{s}"]
    ],
    "correct": [2.5, 125]
  }
}
```

**note**: `content` is ExT-dependent, shown above is the EqEx one. \
**note**: The content can contain links to static content. It can be accessed via `GET /img/:subject/:file` request. \
**note**: User will receive `done` only if authorized as Student. \
**note**: User will receive `correct` only if authorized as teacher or admin. \
**note**: `seed` property is optional. It may be given if a user is authorized as a teacher or admin. For students, it will be taken from a database. \
**note**: With this request, it is NOT possible to access private exercises. See [`POST /api/exam/render`](#post-apiexamrender).

---

### `POST /api/exercise/preview`

| Method | URL                     | Description         | Special status codes |
| ------ | ----------------------- | ------------------- | -------------------- |
| POST   | `/api/exercise/preview` | preview an exercise | 403, 404             |

**Request**:

```json
{
  "content": "---\ntype: EqEx\nname: Pociągi dwa\n---\nZ miast \\(A\\) i \\(B\\) odległych o d=300km wyruszają jednocześnie\ndwa pociągi z prędkościami v_a=[40;60]km/h oraz v_b=[60;80]km/h.\nW jakiej odległości x=?km od miasta \\(A\\) spotkają się te pociągi?\nPo jakim czasie t=?h się to stanie?\n---\nt=d/(v_a+v_b)\nx=t*v_a\n",
  "seed": 0
}
```

**Response**:

```json
{
  "type": "EqEx",
  "name": "Pociągi dwa 2",
  "content": {
    "main": "Z miast \\(A\\) i \\(B\\) odległych o \\(d=300\\;\\mathrm{km}\\) wyruszają jednocześnie\ndwa pociągi z prędkościami \\(v_a= 50\\;\\mathrm{\\frac{km}{h}}\\) oraz \\(v_b=70\\;\\mathrm{\\frac{km}{h}}\\).\nW jakiej odległości \\(x\\) od miasta \\(A\\) spotkają się te pociągi?\nPo jakim czasie \\(t\\) się to stanie?",
    "img": ["1.png", "2.png"],
    "unknowns": [
      ["x", "\\mathrm{km}"],
      ["t", "\\mathrm{s}"]
    ],
    "correct": [2.5, 125]
  }
}
```

**note**: `content` is ExT-dependent, shown above is the EqEx one. User not authorized as teacher or admin will not receive answers. \
**note**: The content can contain links to static content. It can be accessed via `GET /img/:subject/:file` request. \
**note**: `seed` property is optional.

---

## Subject

### `POST /api/subject/create`

| Method | URL                   | Description        | Special status codes         |
| ------ | --------------------- | ------------------ | ---------------------------- |
| POST   | `/api/subject/create` | create new subject | 403, 409 (id already exists) |

**Request**:

```json
{
  "id": "astronomia",
  "users": ["e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855"]
}
```

**Response**:

```json

```

**note**: Subject `id` is its name, it has to be unique. \
**note**: The subject will be public if `users` is `null` or is omitted.

---

### `POST /api/subject/info`

| Method | URL                 | Description                  | Special status codes |
| ------ | ------------------- | ---------------------------- | -------------------- |
| POST   | `/api/subject/info` | get list of authorized users | 403, 404             |

**Request**:

```json
{
  "id": "astronomia"
}
```

**Response**:

```json
[
  {
    "id": "e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855",
    "name": "User"
  }
]
```

---

### `POST /api/subject/permit`

| Method | URL                   | Description                     | Special status codes |
| ------ | --------------------- | ------------------------------- | -------------------- |
| POST   | `/api/subject/permit` | change list of authorized users | 403, 404             |

**Request**:

```json
{
  "id": "astronomia",
  "users": [
    {
      "id": "e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855",
      "name": "User"
    }
  ]
}
```

**Response**:

```json

```

## Auth

### `POST /api/auth/register`

| Method | URL                  | Description         | Special status codes                                 |
| ------ | -------------------- | ------------------- | ---------------------------------------------------- |
| POST   | `/api/auth/register` | register a new user | 403 (wrong invitation), 409 (account already exists) |

**Request**:

```json
{
  "login": "user@example.com",
  "name": "User",
  "hashedPassword": "r02H/fnQ3M3Xfjqsr3dg8mY78lBDXWoiR0O0JcXW8VM=",
  "number": 11,
  "invitation": "QwErTy58"
}
```

**Response**:

```json

```

**note**: The generation of `hashedPassword` is described [here](https://github.com/Pikne-Programy/pikne-zadania/issues/22#issuecomment-789536400). \
**note**: `number` is a number or `null` when it's not provided. \
**note**: `login` is an email address (the hard-coded users like `root` cannot be registered). \
**note**: The registration doesn't authenticate, there should be a `POST /api/auth/login` request afterwards.

---

### `POST /api/auth/login`

| Method | URL               | Description  | Special status codes |
| ------ | ----------------- | ------------ | -------------------- |
| POST   | `/api/auth/login` | authenticate | -                    |

**Request**:

```json
{
  "login": "user@example.com",
  "hashedPassword": "r02H/fnQ3M3Xfjqsr3dg8mY78lBDXWoiR0O0JcXW8VM="
}
```

**Response**:

```json

```

**note**: The generation of `hashedPassword` is described [here](https://github.com/Pikne-Programy/pikne-zadania/issues/22#issuecomment-789536400).

---

### `POST /api/auth/logout`

| Method | URL                | Description    | Special status codes |
| ------ | ------------------ | -------------- | -------------------- |
| POST   | `/api/auth/logout` | unauthenticate | -                    |

**Request**:

```json

```

**Response**:

```json

```

## User

### `GET /api/user/current`

| Method | URL                 | Description                                 | Special status codes |
| ------ | ------------------- | ------------------------------------------- | -------------------- |
| GET    | `/api/user/current` | get info about currently authenticated user | -                    |

**Request**:

```json

```

**Response**:

```json
{
  "name": "User",
  "team": 1,
  "number": 11
}
```

### `POST /api/user/delete`

| Method | URL                | Description       | Special status codes |
| ------ | ------------------ | ----------------- | -------------------- |
| POST   | `/api/user/delete` | unregister a user | 403, 404             |

**Request**:

```json
{
  "id": "1057a9604e04b274da5a4de0c8f4b4868d9b230989f8c8c6a28221143cc5a755"
}
```

**Response**:

```json

```

---

### `POST /api/user/update`

| Method | URL                | Description        | Special status codes |
| ------ | ------------------ | ------------------ | -------------------- |
| POST   | `/api/user/update` | update User's data | 403, 404             |

**Request**:

```json
{
  "id": "1057a9604e04b274da5a4de0c8f4b4868d9b230989f8c8c6a28221143cc5a755",
  "number": 34
}
```

**Response**:

```json

```

**note**: Possible parameters to change are `number` and `name`.

---

### `POST /api/user/info`

| Method | URL              | Description           | Special status codes |
| ------ | ---------------- | --------------------- | -------------------- |
| POST   | `/api/user/info` | get info about a user | 403, 404             |

**Request**:

```json
{
  "id": "1057a9604e04b274da5a4de0c8f4b4868d9b230989f8c8c6a28221143cc5a755"
}
```

**Response**:

```json
{
  "name": "User",
  "team": 1,
  "number": 11
}
```

## Team

### `POST /api/team/create`

| Method | URL                | Description     | Special status codes |
| ------ | ------------------ | --------------- | -------------------- |
| POST   | `/api/team/create` | create new team | 403                  |

**Request**:

```json
{
  "name": "2d"
}
```

**Response**:

```json
2
```

**note**: The response is an `id` of a team.

---

### `POST /api/team/delete`

| Method | URL                | Description   | Special status codes |
| ------ | ------------------ | ------------- | -------------------- |
| POST   | `/api/team/delete` | delete a team | 403, 404             |

**Request**:

```json
{
  "id": 3
}
```

**Response**:

```json

```

---

### `POST /api/team/update`

| Method | URL                | Description        | Special status codes                     |
| ------ | ------------------ | ------------------ | ---------------------------------------- |
| POST   | `/api/team/update` | change team's data | 403, 404, 409 (invitation code is taken) |

**Request**:

```json
{
  "id": 2,
  "invitation": "QwErTy58"
}
```

**Response**:

```json

```

**note**: Possible paramters to change are: `invitation`, `assignee`, `name`. \
**note**: `invitation` in request can also be `""` (in that case, it will be generated) or `null` (in that case, registration will be closed).

---

### `GET /api/team/list`

| Method | URL              | Description       | Special status codes |
| ------ | ---------------- | ----------------- | -------------------- |
| GET    | `/api/team/list` | get list of teams | 403                  |

**Request**:

```json

```

**Response**:

```json
[
  {
    "id": 1,
    "name": "Teachers",
    "assignee": "Smith",
    "invitation": "QwErTy58"
  },
  {
    "id": 2,
    "name": "2d",
    "assignee": "Williams",
    "invitation": null
  },
  {
    "id": 3,
    "name": "3d",
    "assignee": "Williams",
    "invitation": null
  }
]
```

**note**: There is always a hard-coded `admin` team with id `0`. \
**note**: There will be the `invitation` property of all teams the user can manage. \
**note**: When a team has closed registration, `invitation` is `null`.

---

### `POST /api/team/info`

| Method | URL              | Description         | Special status codes |
| ------ | ---------------- | ------------------- | -------------------- |
| POST   | `/api/team/info` | get info about team | 403, 404             |

**Request**:

```json
{
  "id": 2
}
```

**Response**:

```json
{
  "name": "2d",
  "assignee": "Williams",
  "invitation": "QwErTy58",
  "members": [
    {
      "id": "e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855",
      "name": "User",
      "number": 11
    }
  ]
}
```

**note**: `id` property is a hashed email. \
**note**: When team has closed registration, `invitation` is `null`. \
**note**: Students will not receive `invitation` and `members`.

## Group

### `POST /api/group/create`

| Method | URL                 | Description        | Special status codes |
| ------ | ------------------- | ------------------ | -------------------- |
| POST   | `/api/group/create` | create a new group | 403                  |

**Request**:

```json
{
  "id": "physics-2021d",
  "name": "Physics 1d"
}
```

**Response**:

```json

```

---

### `POST /api/group/delete`

| Method | URL                 | Description    | Special status codes |
| ------ | ------------------- | -------------- | -------------------- |
| POST   | `/api/group/delete` | delete a group | 403, 404             |

**Request**:

```json
{
  "id": "physics-2021d"
}
```

**Response**:

```json

```

---

### `POST /api/group/update`

| Method | URL                 | Description         | Special status codes                     |
| ------ | ------------------- | ------------------- | ---------------------------------------- |
| POST   | `/api/group/update` | change group's data | 403, 404, 409 (invitation code is taken) |

**Request**:

```json
{
  "id": "physics-2021d",
  "invitation": "QwErTy58"
}
```

**Response**:

```json

```

**note**: Possible parameters to change are: `invitation`, `name` and `assignee`.

---

### `GET /api/group/list`

| Method | URL               | Description         | Special status codes |
| ------ | ----------------- | ------------------- | -------------------- |
| GET    | `/api/group/list` | get all your groups | -                    |

**Request**:

```json

```

**Response**:

```json
[
  {
    "id": "english-2020d",
    "name": "English 2dd",
    "assignee": "Smith",
    "invitation": "QwErTy58"
  },
  {
    "id": "physics-2021d",
    "name": "Physics 1d",
    "assignee": "Williams",
    "invitation": "XzT87"
  },
  {
    "id": "physics-2020d",
    "name": "Physics 2dd",
    "assignee": "Williams",
    "invitation": null
  }
]
```

**note**: Only admin will receive `assignee` property. \
**note**: Students will not receive `invitation` code.

---

### `POST /api/group/info`

| Method | URL               | Description            | Special status codes |
| ------ | ----------------- | ---------------------- | -------------------- |
| POST   | `/api/group/info` | get info about a group | 403, 404             |

**Request**:

```json
{
  "id": "physics-2021d"
}
```

**Response**:

```json
{
  "id": "physics-2021d",
  "name": "Physics 1d",
  "assignee": "Williams",
  "invitation": "QwErTy58",
  "members": [
    {
      "id": "e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855",
      "name": "User",
      "team": "2d",
      "number": 11
    }
  ],
  "exams": [
    { "id": 1, "name": "Kinematics" },
    { "id": 13, "name": "Dynamics" }
  ]
}
```

**note**: When a group has closed registration. `invitation` is `null`. \
**note**: Students will not receive `invitation` and `members`. \
**note**: Number is from member's team so collisions are possible.

---

### `POST /api/group/join`

| Method | URL               | Description  | Special status codes |
| ------ | ----------------- | ------------ | -------------------- |
| POST   | `/api/group/join` | join a group | 403, 404             |

**Request**:

```json
{
  "id": "physics-2021d",
  "invitation": "QwErTy58"
}
```

**Response**:

```json

```

---

### `POST /api/group/add`

| Method | URL              | Description         | Special status codes |
| ------ | ---------------- | ------------------- | -------------------- |
| POST   | `/api/group/add` | add user to a group | 403, 404             |

**Request**:

```json
{
  "id": "physics-2021d",
  "user": "e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855"
}
```

**Response**:

```json

```

**note**: Only assignee and admin can add a user to a group.

---

## Exam

### `POST /api/exam/create`

| Method | URL                | Description     | Special status codes |
| ------ | ------------------ | --------------- | -------------------- |
| POST   | `/api/exam/create` | create new exam | 403                  |

**Request**:

```json
{
  "group": "physics-2021d",
  "name": "Dynamics",
  "start": 1648807200,
  "duration": 2700
}
```

**Response**:

```json
13
```

**note**: `start` time is given as seconds elapsed from 01.01.1970. \
**note**: Response is an `id` of the created exam.

---

### `POST /api/exam/delete`

| Method | URL                | Description    | Special status codes |
| ------ | ------------------ | -------------- | -------------------- |
| POST   | `/api/exam/delete` | delete an exam | 403, 404             |

**Request**:

```json
{
  "id": 13
}
```

**Response**:

```json

```

---

### `POST /api/exam/update`

| Method | URL                | Description    | Special status codes |
| ------ | ------------------ | -------------- | -------------------- |
| POST   | `/api/exam/update` | update an exam | 403, 404             |

**Request**:

```json
{
  "id": 13,
  "duration": 3000
}
```

**Response**:

```json

```

**note**: Possible paramters to change are: `name`, `group`, `start`, `duration`.

---

### `POST /api/exam/exercise`

| Method | URL                  | Description           | Special status codes |
| ------ | -------------------- | --------------------- | -------------------- |
| POST   | `/api/exam/exercise` | set exercises on exam | 403, 404             |

**Request**:

```json
{
  "id": 13,
  "exercises": [
    {
      "count": 1,
      "ex": ["fizyka/pociagi-dwa", "fizyka/czerpak"],
      "points": 10
    }
  ]
}
```

**Response**:

```json

```

---

### `POST /api/exam/info`

| Method | URL              | Description         | Special status codes |
| ------ | ---------------- | ------------------- | -------------------- |
| POST   | `/api/exam/info` | get info about exam | 403, 404             |

**Request**:

```json
{
  "id": 13
}
```

**Response**:

```json
{
  "status": "off",
  "start": 1620077373,
  "duration": 2700,
  "group": "physics-2021d",
  "pool": [
    {
      "count": 1,
      "exercises": ["fizyka/pociagi-dwa", "fizyka/czerpak"],
      "points": 10
    }
  ]
}
```

**note**: Every exercise in the `exercises` array has `points` number of points.

---

### `POST /api/exam/user`

| Method | URL              | Description    | Special status codes |
| ------ | ---------------- | -------------- | -------------------- |
| POST   | `/api/exam/user` | get user stats | 403, 404             |

**Request**:

```json
{
  "id": 153,
  "user": "e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855"
}
```

**Response**:

```json
{
  "score": 0.9,
  "points": 9,
  "exercises": {
    "pociagi-dwa": [9, 1],
    "czerpak": [0, 0]
  }
}
```

**note**: There are tuples [points, percent] or `[]` when the user didn't know the answer.

---

### `POST /api/exam/stats`

| Method | URL               | Description    | Special status codes |
| ------ | ----------------- | -------------- | -------------------- |
| POST   | `/api/exam/stats` | get exam stats | 403, 404             |

**Request**:

```json
{
  "id": 153
}
```

**Response**:

```json
{
  "exercises": [
    { "id": "fizyka/pociagi-dwa", "points": 10, "avg": 5 },
    { "id": "fizyka/czerpak", "points": 10, "avg": 0 }
  ],
  "users": [
    {
      "id": "e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855",
      "score": 0.5,
      "points": 5,
      "solvings": [[5, 0.5], null]
    }
  ]
}
```

**note**: `solvings` is a list of tuples [points, percent] or `null` when the exercise was not drawn for the user or `[]` when the user didn't know the answer.

---

### `POST /api/exam/render`

| Method | URL                | Description        | Special status codes |
| ------ | ------------------ | ------------------ | -------------------- |
| POST   | `/api/exam/render` | render an exercise | 403, 404             |

**Request**:

```json
{
  "id": 153,
  "exercise": "fizyka/pociagi-dwa"
}
```

**Response**:

```json
{
  "type": "EqEx",
  "name": "Pociągi dwa 2",
  "content": {
    "main": "Z miast \\(A\\) i \\(B\\) odległych o \\(d=300\\;\\mathrm{km}\\) wyruszają jednocześnie\ndwa pociągi z prędkościami \\(v_a= 50\\;\\mathrm{\\frac{km}{h}}\\) oraz \\(v_b=70\\;\\mathrm{\\frac{km}{h}}\\).\nW jakiej odległości \\(x\\) od miasta \\(A\\) spotkają się te pociągi?\nPo jakim czasie \\(t\\) się to stanie?",
    "img": ["1.png", "2.png"],
    "unknowns": [
      ["x", "\\mathrm{km}"],
      ["t", "\\mathrm{s}"]
    ],
    "correct": [2.5, 125]
  }
}
```

**note**: With this request, it is possible to access private exercises. See [`POST /api/exercise/render`](#post-apiexerciserender). \
**note**: It's ExT-dependent, what is shown above is appropriate for the EqEx one.
**note**: The content can contain links to static content. It can be accessed via [`POST /api/exam/static`](#post-apiexamstatic) request. \

---

### `POST /api/exam/static`

| Method | URL                | Description        | Special status codes |
| ------ | ------------------ | ------------------ | -------------------- |
| POST   | `/api/exam/static` | get static content | 403, 404             |

**Request**:

```json
{
  "id": 153,
  "file": "fizyka/bloczki-1.jpg"
}
```

**Response**:
_binary data_

---

### `POST /api/exam/leave`

| Method | URL               | Description                              | Special status codes |
| ------ | ----------------- | ---------------------------------------- | -------------------- |
| POST   | `/api/exam/leave` | block the possibility to rejoin the exam | 403, 404             |

**Request**:

```json
{
  "id": 153
}
```

**Response**:

```json

```

---

### `POST /api/exam/submit`

| Method | URL                | Description       | Special status codes |
| ------ | ------------------ | ----------------- | -------------------- |
| POST   | `/api/exam/submit` | submit a solution | 403, 404             |

**Request**:

```json
{
  "id": 153,
  "exercise": "fizyka/pociagi-dwa",
  "answers": [15.000000000000004, 13]
}
```

**Response**:

```json

```

**note**: It's ExT-dependent, what is shown above is appropriate for the EqEx one.

---
